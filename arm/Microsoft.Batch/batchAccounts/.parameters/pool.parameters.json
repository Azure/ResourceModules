{
    "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentParameters.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
        "name": {
            "value": "<<namePrefix>>azbaweux001"
        },
        "storageAccountId": {
            "value": "/subscriptions/<<subscriptionId>>/resourceGroups/validation-rg/providers/Microsoft.Storage/storageAccounts/adp<<namePrefix>>azsax001"
        },
        "pools": {
            "value": [
                {
                    "batchAccountName": "<<namePrefix>>azbaweux001",
                    "poolName": "helloworld",
                    "userAssignedIdentities": {
                        "/subscriptions/<<subscriptionId>>/resourcegroups/validation-rg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/adp-<<namePrefix>>-az-msi-x-001": {}
                    },
                    "deploymentConfiguration": {
                        "virtualMachineConfiguration": {
                            "imageReference": {
                                "publisher": "microsoftwindowsserver",
                                "offer": "windowsserver",
                                "sku": "2022-datacenter",
                                "version": "latest"
                            },
                            "nodeAgentSkuId": "batch.node.windows amd64"
                        }
                    },
                    "displayName": "hellotest",
                    "interNodeCommunication": "Enabled",
                    "metadata": [
                        {
                            "name": "carmlTest",
                            "value": "helloworld"
                        }
                    ],
                    "networkConfiguration": {
                        "dynamicVNetAssignmentScope": "Job",
                        "publicIPAddressConfiguration": {
                            "ipAddressIds": [],
                            "provision": "BatchManaged"
                        },
                        "subnetId": "/subscriptions/<<subscriptionId>>/resourceGroups/validation-rg/providers/Microsoft.Network/virtualNetworks/adp-<<namePrefix>>-az-vnet-x-001/subnets/<<namePrefix>>-az-subnet-x-001"
                    },
                    "scaleSettings": {
                        "fixedScale": {
                            "resizeTimeout": "PT15M",
                            "targetDedicatedNodes": 1,
                            "targetLowPriorityNodes": 1
                        }
                    },
                    "startTask": {
                        "commandLine": "cmd /c ipconfig",
                        "maxTaskRetryCount": 4,
                        "waitForSuccess": false
                    },
                    "taskSchedulingPolicy": {
                        "nodeFillType": "Pack"
                    },
                    "taskSlotsPerNode": 1,
                    "userAccounts": [
                        {
                            "elevationLevel": "Admin",
                            "name": "carmladmin",
                            "password": "VeryGeheim!",
                            "windowsUserConfiguration": {
                                "loginMode": "Interactive"
                            }
                        }
                    ],
                    "vmSize": "Standard_D2S_v3"
                }
            ]
        }
    }
}
